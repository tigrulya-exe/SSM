# Supported actions

| Action        | Arguments                                                                                                              | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|---------------|------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| addec         | [-policyName $policyName] [-codec $codecName -dataNum $dataNum -parityNum $parityNum -cellSize $cellSize]              | <br>        Either conventional policy name or specific policy schema should be given to this action.<br>        A typical policy name is RS-6-3-1024k. Or add an EC policy with the given parameters.<br>        The cellSize in byte should be divisible by 1024. SSM supports human-readable value for cellSize, e.g., 1KB, 1MB.<br>                                                                                                                                                                                                                                           |
| allssd        | -file $file                                                                                                            | Move $file to SSD storage.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| alldisk       | -file $file                                                                                                            | Move $file to disk storage.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| append        | -file $file [-length $length -bufSize $bufSize]                                                                        | Append $file with $length length and $bufSize buffer size.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| archive       | -file $file                                                                                                            | Archive $file.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| cache         | -file $file [-replica $replica_num]                                                                                    | Cache $file to HDFS cache. $replica_num is the number of replicas to be cached.<br>        If it is not specified, SSM will get replica number for $file from HDFS or use 1<br>        in directory case.                                                                                                                                                                                                                                                                                                                                                                         |
| checkcompress | -file $file                                                                                                            | Show the compression status of $file, not applicable to a directory.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| checkec       | -file $file                                                                                                            | Show the EC policy of $file. The given $file can be a directory as well.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| checkstorage  | -file $file                                                                                                            | Show the storage type of $file.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| checksum      | -file $file                                                                                                            | Show the checksum of $file.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| compact       | -file ['$file1','$file2',..] -containerFile $containerFile                                                             | Compact $file1, $file2, etc. to $containerFile. Please note that space is not allowed in the file list. In compact rule,<br>          specifying container file is invalid since SSM will assign a container file for small files under same directory.                                                                                                                                                                                                                                                                                                                           |
| compress      | -file $file [-bufSize $bufSize] [-codec $codec]                                                                        | Compress $file, not applicable to a directory. If option -bufSize is not specified, SSM will use the value obtained by<br>        dividing file size with the max number of splits, configured in smart-default.xml. The least buffer size is 1MB. SSM<br>        supports configuring human-readable value for bufSize, e.g., 1MB. SSM supports different compression implementations,<br>        including Lz4, Bzip2, Zlib and snappy. If option -codec is not specified, SSM will use the configuration value, Zlib<br>        by default, for 'smart.compression.codec'.<br> |
| concat        | -file $src -dest $dest                                                                                                 | Concatenate the files in $src which lists at least two files<br>        separated by comma and $dest is the target file.                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| copy          | -file $src -dest $dest [-offset $offset] [-length $length] [-bufSize $size] [-truncateWaitMs $truncateWaitMs] [-force] | Copy the file in $src with $offset offset, $length length and $size buffer size. Use -force flag to enable full-file recopies instead of appends in cases when the scheme of the target path doesn't support appends.                                                                                                                                                                                                                                                                                                                                                             |
| copy2s3       | copy2s3 -file $file -dest $s3_dest                                                                                     | Copy $file to $s3_dest which is on Amazon S3, and $s3_dest is a url starting with s3a://.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| decompress    | -file $file [-bufSize $size]                                                                                           | Decompress $file, not applicable to a directory.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| delete        | -file $file                                                                                                            | Delete $file.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| disableec     | -policy $policyName                                                                                                    | Disable the given EC policy $policyName.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| ec            | -file $file [-policy $policyName -bufSize $bufSize]                                                                    | Make the EC policy of $file become the given one or default one.<br>        If option -policy is not given, SSM will use the default one configured in HDFS.<br>        If option -bufSize is not given, SSM will use the default value in byte equivalent to 1MB.<br>        SSM supports human-readable value for bufSize, e.g., 1KB, 1MB.<br>                                                                                                                                                                                                                                  |
| echo          | -msg $message                                                                                                          | Print $message.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| enableec      | -policy $policyName                                                                                                    | Enable the given EC policy $policyName.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| list          | -file $src                                                                                                             | List all the files in $src.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| listec        | No option                                                                                                              | List all EC policies.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| merge         | -file $src -dest $dest [-bufSize $size]                                                                                | Merge the files in $src which lists at least two files<br>        separated by comma and $dest is the target file.                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| onedisk       | -file $file                                                                                                            | Move one replica of $file to disk. Not applicable to EC block.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| onessd        | -file $file                                                                                                            | Move one replica of $file to SSD. Not applicable to EC block.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ramdisk       | -file $file                                                                                                            | Set LAZY_PERSIST storage policy. $file should be a dir path and RAM_DISK is<br>        required to be configured beforehand. After the setting, the newly created<br>        file under this dir will be lazily persisted.                                                                                                                                                                                                                                                                                                                                                        |
| read          | -file $file [-bufSize $size]                                                                                           | Read $file with $size buffer size.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| removeec      | -policy $policyName                                                                                                    | Remove the given EC policy $policyName.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| rename        | -file $src -dest $dest                                                                                                 | Rename $src to $dest.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| truncate      | -file $src -length $length                                                                                             | Truncate $src to $length size.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| truncate0     | -file $src                                                                                                             | Truncate $src to 0 size.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| uncache       | -file $file                                                                                                            | Uncache $file from HDFS cache.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| uncompact     | -containerFile $containerFile                                                                                          | Uncompact $containerFile to original files.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| unec          | -file $file [-bufSize $bufSize]                                                                                        | Make the EC policy of $file become replication.<br>        If option -bufSize is not given, SSM will use the default value in byte equivalent to 1MB.<br>        SSM supports human-readable value for bufSize, e.g., 1KB, 1MB.<br>                                                                                                                                                                                                                                                                                                                                               |
| write         | -file $file -length $length [-bufSize $size]                                                                           | Write random data to $file with $size buffer size and $length length.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| sleep         | -ms $millisecond                                                                                                       | Sleep $millisecond.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| sync          | -dest $dest                                                                                                            | Sync file to $dest.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
